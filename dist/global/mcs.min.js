var mcs=mcs||{};!function(){"use strict";return mcs.g=mcs.g||{},mcs.util=mcs.util||{},mcs.date=mcs.date||{},mcs.app=mcs.app||{name:"app",version:"1.0"},mcs.app.dict=mcs.app.dict||{},mcs.app.config=mcs.app.config||{},mcs.config=mcs.config||{},mcs}(),function(){"use strict";var a={css:"css",javascript:"js"},b=function(b,c,d){var e=d?"":mcs.app.config.mcsComponentBaseUrl.replace("http://","http:\\"),f="";switch(b){case a.css:f+="."+a.css;break;case a.javascript:f+="."+a.javascript}return f?(e+=c.substring(c.length-f.length)!=f?c+f:c,e=e.replace(new RegExp("//","gm"),"/").replace("http:\\","http://")):void 0},c=function(b,c){if(c.length){var d={files:[],localFiles:[],container:""};return 1==c.length?c[0]instanceof Object&&c[0].constructor==Object?d=c:c[0]instanceof Array&&c[0].constructor==Array?d.files=c[0]:"string"==typeof c[0]&&(d.files=[c[0]]):(c[0]instanceof Array&&c[0].constructor==Array?d.files=c[0]:"string"==typeof c[0]&&(d.files=[c[0]]),c[1]instanceof Array&&c[1].constructor==Array?d.localFiles=c[1]:"string"==typeof c[1]&&(d.localFiles=[c[1]]),d.container=document.getElementById(arguments[2])||""),b==a.css?d[0]||{cssFiles:d.files,localCssFiles:d.localFiles,container:d.container}:d[0]||{jsFiles:d.files,localJsFiles:d.localFiles,container:d.container}}};return mcs.g.loadCss=function(){for(var d=c(a.css,arguments),e=[{isLocal:!1,data:d.cssFiles||[]},{isLocal:!0,data:d.localCssFiles||[]}],f=0,g=e.length;g>f;f++)for(var h=e[f],i=0,j=h.data.length;j>i;i++){var k=h.data[i],l=k.length;if(l){var m=b(a.css,k,h.isLocal),n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",m);var o=d.container||document.getElementsByTagName("head")[0];o.appendChild(n)}}},mcs.g.loadJs=function(){for(var d=c(a.javascript,arguments),e=[{isLocal:!1,data:d.jsFiles||[]},{isLocal:!0,data:d.localJsFiles||[]}],f=0,g=e.length;g>f;f++)for(var h=e[f],i=0,j=h.data.length;j>i;i++){var k=h.data[i],l=k.length;if(l){var m=b(a.javascript,k,h.isLocal),n=document.createElement("script");n.setAttribute("src",m);var o=d.container||document.getElementsByTagName("head")[0];o.appendChild(n)}}},mcs.g.loadRequireJs=function(c,d,e){if(c&&d){var f=a.javascript,g=b(f,c,e),h="."+f;d.substring(d.length-h.length)!=h&&(d+=h);var i=document.createElement("script");i.setAttribute("src",g),i.setAttribute("data-main",d),document.getElementsByTagName("head")[0].appendChild(i)}},mcs.g}(),function(){"use strict";return mcs.util.isObjectsEqual=function(a,b){var c=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(b);if(c.length!=d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!==b[f])return!1}return!0},mcs.util.postMockForm=function(a,b){var c=document.createElement("form");c.action=a,c.target="_blank",c.method="post",c.style.display="none";var d=document.createElement("textarea");d.name="form",d.value=JSON.stringify(b),c.appendChild(d),document.body.appendChild(c),c.submit(),document.body.removeChild(c)},mcs.util.removeByValue=function(a,b){for(var c=0;c<a.length;c++)if(this[c]==b){a.splice(c,1);break}},mcs.util.removeByObjectWithKeys=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=c.length,e=a.length-1;e>=0;e--){for(var f=0,g=0;d>g;g++)a[e].hasOwnProperty(c[g])&&a[e][c[g]]==b[c[g]]&&(f+=1);f==d&&a.splice(e,1)}},mcs.util.removeByObjectsWithKeys=function(a,b){for(var c=b.length-1;c>=0;c--)mcs.util.removeByObjectWithKeys(a,b[c])},mcs.util.removeByObject=function(a,b){for(var c=0;c<a.length;c++)if(mcs.util.isObjectsEqual(a[c],b)){a.splice(c,1);break}},mcs.util.newGuid=function(){for(var a="",b=1;32>=b;b++){var c=Math.floor(16*Math.random()).toString(16);a+=c,8!=b&&12!=b&&16!=b&&20!=b||(a+="-")}return a},mcs.util.format=function(a,b){var c=a;if(arguments.length>0)if(2==arguments.length&&"object"==typeof b){for(var d in b)if(void 0!=b[d]){var e=new RegExp("({"+d+"})","g");c=c.replace(e,b[d])}}else for(var f=1;f<arguments.length;f++)if(void 0!=arguments[f]){var e=new RegExp("({)"+(f-1)+"(})","g");c=c.replace(e,arguments[f])}return c},mcs.util.isString=function(a){return"string"==typeof a},mcs.util.isArray=function(a){return a instanceof Array&&a.constructor==Array},mcs.util.isObject=function(a){return a instanceof Object&&a.constructor==Object},mcs.util.merge=function(a){for(var b in a){var c=b;b=0==b.toLowerCase().indexOf("c_code_abbr_")?b:"c_codE_ABBR_"+b,mcs.app.dict[b]=a[c]}},mcs.util.mapping=function(a,b,c){if(a&&b.key&&b.value){var d=function(){var c=[];for(var d in a){var e={key:a[d][b.key],value:a[d][b.value]};if(b.props){var f=mcs.util.toArray(b.props);for(var g in f){var h=f[g];e[h]=a[d][h]}}c.push(e)}return c};if(void 0==c)return d();c=0==c.indexOf("c_codE_ABBR_")?c:"c_codE_ABBR_"+c;var e={};return e[c]=d(),e}},mcs.util.limit=function(a){a instanceof jQuery&&(a=a[0]),1==a.value.length?a.value=a.value.replace(/[^1-9]/g,""):a.value=a.value.replace(/\D/g,"")},mcs.util.number=function(a){a instanceof jQuery&&(a=a[0]),""!=a.value&&(a.value=a.value.replace(/[^\d.]/g,""),a.value=a.value.replace(/^\./g,""),a.value=a.value.replace(/^0{2,}\./g,"0."),a.value=a.value.replace(/\.{2,}/g,"."),a.value=a.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."))},mcs.util.contains=function(a,b,c){if(!a||!b)return!1;var d=mcs.util.toArray(b,c);for(var e in d)if(jQuery.inArray(d[e],a)>-1)return!0;return!1},mcs.util.containsObject=function(a,b,c){if(!(a&&a.length&&b&&b[c]))return!1;for(var d in a)if(a[d][c]==b[c])return!0;return!1},mcs.util.containsElement=function(a,b){return mcs.util.toArray(a).indexOf(b)>-1},mcs.util.toArray=function(a,b){var c=[];if("string"==typeof a){b=b||",";var d=a.split(b);d.length>1?c=d:c.push(a)}return a instanceof Array&&(c=a),c},mcs.util.hasAttr=function(a,b){return"undefined"!=typeof a.attr(b)},mcs.util.hasAttrs=function(a,b){var c=mcs.util.toArray(b);for(var d in c)if(mcs.util.hasAttr(a,c[d]))return!0;return!1},mcs.util.bool=function(a,b){return b=b||!1,"boolean"==typeof a?a:(a+="",b&&"0"==a?!0:a&&a.length?(a=a.toLowerCase(),"false"!==a&&"0"!==a&&"undefined"!==a&&"null"!==a):!1)},mcs.util.clone=function(a){if("object"!=typeof a)return a;if(null==a)return a;var b=new Object;for(var c in a)b[c]=mcs.util.clone(a[c]);return b},mcs.util.indexOf=function(a,b,c){if(!a||!a.length)return-1;for(var d in a){if(!a[d][b])return-1;if(a[d][b]==c)return d}return-1},mcs.util.contains=function(a,b,c){if(!a||!b)return!1;var d=mcs.util.toArray(b,c);for(var e in d)if(jQuery.inArray(d[e],a))return!0;return!1},mcs.util.toArray=function(a,b){var c=[];if("string"==typeof a){b=b||",";var d=a.split(b);d.length>1?c=d:c.push(a)}return a instanceof Array&&(c=a),c},mcs.util.selectAll=function(a){var b=[];return angular.forEach(a,function(a){b.push(a.key)}),b},mcs.util.unSelectAll=function(){return[]},mcs.util.inverseSelect=function(a,b){var c=b;return b=[],angular.forEach(a,function(a){-1==c.indexOf(a.key)&&b.push(a.key)}),b},mcs.util.buildCascadeDataSource=function(a,b){for(var c in a){var d=a[c];if(0==d.parentKey){var e=b[d.key];e?e.value=d.value:b[d.key]={value:d.value,children:[]}}else{var e=b[d.parentKey];e?b[d.parentKey].children.push(d):b[d.parentKey]={value:"",children:[d]}}}},mcs.util.setSelectedItems=function(a,b,c){var d=a.indexOf(b.key);c.target.checked?-1===d&&a.push(b.key):-1!==d&&a.splice(d,1)},mcs.util.setDefaultSelected=function(a,b){if(a&&a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];e.checked=e.key==b}},mcs.util.getDictionaryItemValue=function(a,b){if(void 0==b)return"";if(!a||!a.length)return b;for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e.key==b)return e.value}return b},mcs.util.loadDependencies=function(a){return{resolver:["$q","$rootScope",function(b,c){var d=b.defer();return require(a,function(){c.$apply(function(){d.resolve()})}),d.promise}]}},mcs.util.configBreadcrumb=function(a,b){a.setOptions({templateUrl:b})},mcs.util.params=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},mcs.util.loadRoute=function(a,b){var c=null,d=b.breadcrumb;return d&&(c=d,b["abstract"]||d.parent||(c.parent=function(a){return a.$state.params.prev})),a.state(b.name,{url:b.url,"abstract":b["abstract"]||!1,templateUrl:b.templateUrl,controller:b.controller,controllerAs:b.controllerAs||"vm",ncyBreadcrumb:c,resolve:mcs.util.loadDependencies(b.dependencies)}),mcs.util},mcs.util.loadDefaultRoute=function(a,b,c){if(!(c&&c.name&&c.url&&c.templateUrl))return void console.log("no default route settings or default route has no correct configuration, including name, url and templateUrl.");var d=c.layout?c.layout.url+c.url:c.url;if(b.otherwise(d),c.layout){if(!c.layout.name||!c.layout.url||!c.layout.templateUrl)return void console.log("default route layout has no correct configuration, including name, url and templateUrl.");a.state(c.layout.name,{"abstract":!0,url:c.layout.url,templateUrl:c.layout.templateUrl})}a.state(c.name,{url:c.url,templateUrl:c.templateUrl,controller:c.controller,controllerAs:c.controllerAs||"vm",ncyBreadcrumb:c.breadcrumb,resolve:mcs.util.loadDependencies(c.dependencies)})},mcs.util.configProvider=function(a,b,c,d,e){a&&angular.isDefined(a)&&(a.registerController=b.register,a.registerDirective=c.directive,a.registerFilter=d.register,a.registerFactory=e.factory,a.registerService=e.service,a.registerConstant=e.constant,a.registerValue=e.value)},mcs.util.configInterceptor=function(a,b,c){if(a.defaults.transformResponse.unshift(function(a,b){if(mcs.util.isString(a)){var c=/^\)\]\}',?\n/,d="application/json",e=/^\[|^\{(?!\{)/,f={"[":/]$/,"{":/}$/},g=a.replace(c,"").trim();if(g){var h=b("Content-Type"),i=g.match(e);(h&&0===h.indexOf(d)||i&&f[i[0]].test(g))&&(a=new Function("","return "+g)())}}return a}),c)for(var d in c)a.interceptors.push(c[d]);b.resourceUrlWhitelist(["self",mcs.app.config.mcsComponentBaseUrl+"**"])},mcs.util}(),function(){var a=new Date,b=a.getDay(),c=a.getDate(),d=a.getMonth(),e=a.getYear();e+=2e3>e?1900:0;var f=new Date;f.setDate(1),f.setMonth(f.getMonth()-1);var g=(f.getYear(),f.getMonth());return mcs.date.format=function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return 10>c&&(c="0"+c),10>d&&(d="0"+d),b+"-"+c+"-"+d},mcs.date.compare=function(a,b){var c=new Date(a.replace(/-/g,"/")),d=new Date(b.replace(/-/g,"/"));return d>=c},mcs.date.getMonthDays=function(a){var b=new Date(e,a,1),c=new Date(e,a+1,1),d=(c-b)/864e5;return d},mcs.date.getQuarterStartMonth=function(){var a=0;return 3>d&&(a=0),d>2&&6>d&&(a=3),d>5&&9>d&&(a=6),d>8&&(a=9),a},mcs.date.today=function(){var a=new Date(e,d,c);return a},mcs.date.getWeekStartDate=function(){var a=new Date(e,d,c-b);return mcs.date.format(a)},mcs.date.getWeekEndDate=function(){var a=new Date(e,d,c+(6-b));return mcs.date.format(a)},mcs.date.getMonthStartDate=function(){var a=new Date(e,d,1);return mcs.date.format(a)},mcs.date.getMonthEndDate=function(){var a=new Date(e,d,getMonthDays(d));return mcs.date.format(a)},mcs.date.getLastMonthStartDate=function(){var a=new Date(e,g,1);return mcs.date.format(a)},mcs.date.getLastMonthEndDate=function(){var a=new Date(e,g,getMonthDays(g));return mcs.date.format(a)},mcs.date.getQuarterStartDate=function(){var a=new Date(e,getQuarterStartMonth(),1);return mcs.date.format(a)},mcs.date.getQuarterEndDate=function(){var a=getQuarterStartMonth()+2,b=new Date(e,a,getMonthDays(a));return mcs.date.format(b)},mcs.date}(),mcs.browser=function(){var a={},b=navigator.userAgent;console.info("useragent: ",b);var c=b.indexOf("Opera")>-1;if(c){if("Opera"==navigator.appName)a.version=parseFloat(navigator.appVersion);else{var d=new RegExp("Opera (\\d+.\\d+)");d.test(b),a.version=parseFloat(RegExp.$1)}a.opera=!0}var e=b.indexOf("Chrome")>-1;if(e)if(b.indexOf("Edge")>-1){var f=new RegExp("Edge/(\\d+\\.\\d+)");f.test(b),a.version=parseFloat(RegExp.$1),a.edge=!0}else{var g=new RegExp("Chrome/(\\d+\\.\\d+(?:\\.\\d+\\.\\d+))?");g.test(b),a.version=parseFloat(RegExp.$1),a.chrome=!0}var h=(b.indexOf("KHTML")>-1||b.indexOf("Konqueror")>-1||b.indexOf("AppleWebKit")>-1)&&!e;if(h){var i=b.indexOf("AppleWebKit")>-1,j=b.indexOf("Konqueror")>-1;if(i){var k=new RegExp("Version/(\\d+(?:\\.\\d*)?)");k.test(b);parseFloat(RegExp.$1);a.version=parseFloat(RegExp.$1),a.safari=!0}else if(j){var l=new RegExp("Konqueror/(\\d+(?:\\.\\d+(?\\.\\d)?)?)");l.test(b),a.version=parseFloat(RegExp.$1),a.konqueror=!0}}var m=b.indexOf("compatible")>-1&&b.indexOf("MSIE")>-1&&!c;if(m||a.edge){var n=new RegExp("MSIE (\\d+\\.\\d+);");n.test(b),a.version=parseFloat(RegExp.$1),a.msie=!0}var o=b.indexOf("Gecko")>-1&&!e&&!h;if(o){var p=new RegExp("rv:(\\d+\\.\\d+(?:\\.\\d+)?)");p.test(b),a.version=parseFloat(RegExp.$1),11==a.version&&(a.msie=!0),a.mozilla=!0}return{s:a}}();